<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Relationships Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .field-column {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .field-column:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .field-column.active {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .schema-table {
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body class="bg-white p-8">
    <div class="max-w-6xl mx-auto">
        <h2 class="text-2xl font-semibold text-slate-900 mb-2">Timestream Data Model Structure</h2>
        <p class="text-sm text-slate-600 mb-6">All data stored in a single schemaless record, not separate tables</p>

        <!-- Legend -->
        <div class="mb-6 flex items-center gap-6 text-xs">
            <div class="flex items-center gap-2">
                <div class="w-3 h-3 bg-blue-500 rounded"></div>
                <span class="text-slate-600 font-medium">Time Column</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-3 h-3 bg-purple-500 rounded"></div>
                <span class="text-slate-600 font-medium">Dimensions (Attributes)</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-3 h-3 bg-green-500 rounded"></div>
                <span class="text-slate-600 font-medium">Measures (Metrics)</span>
            </div>
        </div>

        <!-- Main Schema View -->
        <div class="bg-white border-2 border-slate-300 rounded-lg overflow-hidden mb-6 shadow-lg">
            <div class="bg-slate-800 px-4 py-3 flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
                    </svg>
                    <span class="text-white font-semibold text-sm">SensorData</span>
                    <span class="text-slate-400 text-xs ml-2">Timestream Table</span>
                </div>
            </div>

            <!-- Table Structure -->
            <div class="overflow-x-auto">
                <table class="w-full schema-table text-xs">
                    <thead>
                        <tr class="bg-slate-100 border-b-2 border-slate-300">
                            <th class="px-3 py-2 text-left text-slate-500 font-semibold uppercase tracking-wider text-[10px]">Field Name</th>
                            <th class="px-3 py-2 text-left text-slate-500 font-semibold uppercase tracking-wider text-[10px]">Data Type</th>
                            <th class="px-3 py-2 text-left text-slate-500 font-semibold uppercase tracking-wider text-[10px]">Attribute Type</th>
                            <th class="px-3 py-2 text-left text-slate-500 font-semibold uppercase tracking-wider text-[10px]">Sample Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Time Column -->
                        <tr class="field-column border-b border-slate-200 bg-blue-50 hover:bg-blue-100" data-category="time">
                            <td class="px-3 py-3 font-semibold text-slate-900">timestamp</td>
                            <td class="px-3 py-3 text-slate-600">TIMESTAMP</td>
                            <td class="px-3 py-3">
                                <span class="inline-flex items-center px-2 py-1 rounded text-[10px] font-semibold bg-blue-500 text-white">TIME</span>
                            </td>
                            <td class="px-3 py-3 text-slate-600">2024-01-15T10:30:00Z</td>
                        </tr>

                        <!-- Dimensions -->
                        <tr class="field-column border-b border-slate-200 bg-purple-50 hover:bg-purple-100" data-category="dimension">
                            <td class="px-3 py-3 font-semibold text-slate-900">device_id</td>
                            <td class="px-3 py-3 text-slate-600">VARCHAR</td>
                            <td class="px-3 py-3">
                                <span class="inline-flex items-center px-2 py-1 rounded text-[10px] font-semibold bg-purple-500 text-white">DIMENSION</span>
                            </td>
                            <td class="px-3 py-3 text-slate-600">sensor-001</td>
                        </tr>

                        <tr class="field-column border-b border-slate-200 bg-purple-50 hover:bg-purple-100" data-category="dimension">
                            <td class="px-3 py-3 font-semibold text-slate-900">location</td>
                            <td class="px-3 py-3 text-slate-600">VARCHAR</td>
                            <td class="px-3 py-3">
                                <span class="inline-flex items-center px-2 py-1 rounded text-[10px] font-semibold bg-purple-500 text-white">DIMENSION</span>
                            </td>
                            <td class="px-3 py-3 text-slate-600">warehouse-a</td>
                        </tr>

                        <tr class="field-column border-b border-slate-200 bg-purple-50 hover:bg-purple-100" data-category="dimension">
                            <td class="px-3 py-3 font-semibold text-slate-900">sensor_type</td>
                            <td class="px-3 py-3 text-slate-600">VARCHAR</td>
                            <td class="px-3 py-3">
                                <span class="inline-flex items-center px-2 py-1 rounded text-[10px] font-semibold bg-purple-500 text-white">DIMENSION</span>
                            </td>
                            <td class="px-3 py-3 text-slate-600">environmental</td>
                        </tr>

                        <!-- Measures -->
                        <tr class="field-column border-b border-slate-200 bg-green-50 hover:bg-green-100" data-category="measure">
                            <td class="px-3 py-3 font-semibold text-slate-900">temperature</td>
                            <td class="px-3 py-3 text-slate-600">DOUBLE</td>
                            <td class="px-3 py-3">
                                <span class="inline-flex items-center px-2 py-1 rounded text-[10px] font-semibold bg-green-500 text-white">MEASURE</span>
                            </td>
                            <td class="px-3 py-3 text-slate-600">22.5</td>
                        </tr>

                        <tr class="field-column border-b border-slate-200 bg-green-50 hover:bg-green-100" data-category="measure">
                            <td class="px-3 py-3 font-semibold text-slate-900">humidity</td>
                            <td class="px-3 py-3 text-slate-600">DOUBLE</td>
                            <td class="px-3 py-3">
                                <span class="inline-flex items-center px-2 py-1 rounded text-[10px] font-semibold bg-green-500 text-white">MEASURE</span>
                            </td>
                            <td class="px-3 py-3 text-slate-600">65.3</td>
                        </tr>

                        <tr class="field-column border-b border-slate-200 bg-green-50 hover:bg-green-100" data-category="measure">
                            <td class="px-3 py-3 font-semibold text-slate-900">pressure</td>
                            <td class="px-3 py-3 text-slate-600">DOUBLE</td>
                            <td class="px-3 py-3">
                                <span class="inline-flex items-center px-2 py-1 rounded text-[10px] font-semibold bg-green-500 text-white">MEASURE</span>
                            </td>
                            <td class="px-3 py-3 text-slate-600">1013.25</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Info Panel -->
            <div id="info-panel" class="bg-slate-50 px-4 py-3 border-t border-slate-200">
                <p class="text-xs text-slate-600">
                    <strong class="text-slate-900">Single Record Structure:</strong> All fields exist in one record. Hover over rows to see category details.
                </p>
            </div>
        </div>

    </div>

    <script>
        const rows = document.querySelectorAll('.field-column');
        const infoPanel = document.getElementById('info-panel');

        const categoryInfo = {
            time: {
                title: 'Time Column',
                desc: 'Every Timestream record must have a timestamp. This is the primary axis for time-series queries and data retention.',
                color: 'blue'
            },
            dimension: {
                title: 'Dimensions (Attributes)',
                desc: 'Metadata that provides context for your measurements. Use for grouping, filtering, and identifying data sources.',
                color: 'purple'
            },
            measure: {
                title: 'Measures (Metrics)',
                desc: 'Numeric values you want to track over time. Supports aggregations like AVG, SUM, MIN, MAX in queries.',
                color: 'green'
            }
        };

        rows.forEach(row => {
            row.addEventListener('mouseenter', () => {
                const category = row.dataset.category;
                const info = categoryInfo[category];

                // Update info panel
                infoPanel.innerHTML = `
                    <p class="text-xs text-slate-600">
                        <strong class="text-${info.color}-600">${info.title}:</strong> ${info.desc}
                    </p>
                `;

                // Highlight related rows
                rows.forEach(r => {
                    if (r.dataset.category === category) {
                        r.classList.add('active');
                    } else {
                        r.style.opacity = '0.4';
                    }
                });
            });

            row.addEventListener('mouseleave', () => {
                // Reset info panel
                infoPanel.innerHTML = `
                    <p class="text-xs text-slate-600">
                        <strong class="text-slate-900">Single Record Structure:</strong> All fields exist in one record. Hover over rows to see category details.
                    </p>
                `;

                // Reset opacity and highlights
                rows.forEach(r => {
                    r.classList.remove('active');
                    r.style.opacity = '1';
                });
            });
        });
    </script>
</body>
</html>
